读写锁
===


读写锁和互斥量类似，但拥有更高的并行性和更小的锁粒度。
互斥量存在两种状态，加锁和不加锁，而读写锁存在三种状态：
- 读模式下的加锁
- 写模式下的加锁
- 无锁状态


![读写锁操作共享数据](images/%E8%AF%BB%E5%86%99%E9%94%81%E6%93%8D%E4%BD%9C%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE.png)


当读写锁时写锁状态时，所有试图对这个锁加锁的线程都会被阻塞。
当读写锁读读锁状态时，所有试图已读模式进行加锁的线程可以得到访问权限，但是所有试图已写模式进行加锁的线程将会被阻塞到所有持有读锁状态的线程全部释放锁为止

读写锁也叫共享互斥锁，在写模式下是互斥的，在读模式下是共享的，因此能为程序提高更强的并行性

## 初始化和删除

## 加锁和解锁

## 带有超时的读写锁
